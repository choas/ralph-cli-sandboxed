# Ralph CLI Docker Compose
# Generated by ralph-cli

services:
  ralph:
    image: ralph-ralph-cli-sandboxed
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      # Mount project root (two levels up from .ralph/docker/)
      - ../..:/workspace
      # Mount host's ~/.claude for Pro/Max OAuth credentials
      - ${HOME}/.claude:/home/node/.claude
      - ralph-ralph-cli-sandboxed-history:/commandhistory
    # Uncomment to use API key instead of OAuth:
    # environment:
    #   - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    working_dir: /workspace
    stdin_open: true
    tty: true
    cap_add:
      - NET_ADMIN  # Required for firewall
    # Uncomment to enable firewall sandboxing:
    # command: bash -c "sudo /usr/local/bin/init-firewall.sh && zsh"

volumes:
  ralph-ralph-cli-sandboxed-history:
